{"version":3,"sources":["components/Message/Message.module.css","components/Message/AddMessage/AddMessage.module.css","components/Message/Users/Users.module.css","hoc/WithAuthRedirect.js","components/Message/Users/Users.js","components/Message/AddMessage/AddMessage.js","components/Message/AddMessage/AddMessageContainer.js","components/SearchUsers/SearchUsers.js","components/SearchUsers/SearchUsersContainer.js","components/Message/Message.js","components/Message/MessageApi.js"],"names":["module","exports","mapStateToPropsRedirect","state","isAuth","auth","Users","massUsers","dialog","map","d","key","id","className","classes","src","photos","small","face","alt","to","name","mess","status","maxLength300","maxLengthCreator","MessageReduxForm","reduxForm","form","props","onSubmit","handleSubmit","Field","placeholder","component","Textarea","validate","requiredField","divButtonSend","Button","value","AddMessage","block","dataDialogs","formData","addNewMess","message","AddMessageContainer","connect","dialogs","dispatch","addMessActionCreator","SearchUsersReduxForm","search","inputSearch","type","Input","buttonSearch","SearchUsers","searchUsers","getUsersSearchThunkCreator","users","SearchUsersContainer","usersPage","searchUsersForName","Counter","counterUsers","text","numbers","Message","MessageApi","this","React","Component","compose","RedirectComponent"],"mappings":"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","file":"static/js/3.46788d4e.chunk.js","sourcesContent":["// extracted by mini-css-extract-plugin\nmodule.exports = {\"dialogs\":\"Message_dialogs__2baLX\",\"searchUsers\":\"Message_searchUsers__9t9jj\",\"title\":\"Message_title__-9VyK\",\"search\":\"Message_search__gkp-3\",\"inputSearch\":\"Message_inputSearch__3V8kI\",\"buttonSearch\":\"Message_buttonSearch__2KJW5\",\"counterUsers\":\"Message_counterUsers__rp0hV\",\"text\":\"Message_text__2kiW0\",\"numbers\":\"Message_numbers__4YsQx\",\"viewingInfo\":\"Message_viewingInfo___2Tny\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"divButtonSend\":\"AddMessage_divButtonSend__30J92\",\"block\":\"AddMessage_block__2zH6u\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"dialog\":\"Users_dialog__3AOii\",\"active\":\"Users_active__1d9P7\"};","import React from \"react\";\r\n\r\nimport {Redirect} from \"react-router-dom\";\r\nimport {connect} from \"react-redux\";\r\n\r\nlet  mapStateToPropsRedirect = (state) =>({\r\n    isAuth: state.auth.isAuth\r\n});\r\n\r\n export const WithAuthRedirect = (Component) =>{\r\n    class RedirectComponent extends  React.Component{\r\n        render() {\r\n            if (!this.props.isAuth) return <Redirect to = '/login'/>;\r\n            return <Component{...this.props}/>\r\n        }\r\n    }\r\n    let ConnectAuthRedirect = connect (mapStateToPropsRedirect)(RedirectComponent);//дважды оборачиваем компоненту в connect чтоб взять из пропсов необходимое let  mapStateToPropsRedirect =...\r\n\r\n    return ConnectAuthRedirect;\r\n};\r\n//WithAuthRedirect - hoc (компонента высшего порядка) функция, которая принимает\r\n//как параметр компоненту и возвращает к ней контейнерную компоненту\r\n// в данном случаее hoc делает перенаправление (с помошью компоненты Redirect)на другую страницу согласно условия","import React from \"react\";\r\nimport classes from './Users.module.css';\r\nimport {NavLink} from \"react-router-dom\";\r\nimport face from \"../../../img/icons/user.jpg\";\r\n\r\nconst Users = ({massUsers}) =>{\r\n    //console.log(props);\r\n    let path='/dialogs/';\r\n    let dialog = massUsers.map(d=>\r\n        <div key={d.id} className={classes.dialog}>\r\n             <img src={ d.photos.small||face} alt=\"\"/>\r\n            <NavLink to={path + d.id}> <b>{d.name} </b>  </NavLink>\r\n            <span>{d.mess||d.status}</span>\r\n\r\n        </div>\r\n    );\r\n\r\n    return( <div>{dialog} </div> )\r\n\r\n};\r\nexport  default  Users;","import React from \"react\";\r\nimport classes from \"./AddMessage.module.css\";\r\nimport Users from \"../Users/Users\";\r\nimport {Field, reduxForm} from \"redux-form\";\r\nimport {maxLengthCreator, requiredField} from \"../../../utils/validation/validator\";\r\nimport {Textarea} from \"../../commons/FormControls/FormControls\";\r\nimport Button from \"../../Button/Button\";\r\n\r\nconst maxLength300 = maxLengthCreator(100);\r\n\r\nconst MessageForm = (props) =>{\r\n    return(\r\n        <form onSubmit={props.handleSubmit}>\r\n            <div><Field name={'message'} placeholder={'message'} component={Textarea} validate={[requiredField, maxLength300]}/></div>\r\n            <div className={classes.divButtonSend}> <Button value=\"отправить\"/></div>\r\n        </form>\r\n    )\r\n};\r\nconst MessageReduxForm = reduxForm({//контейнерная компонента,созда-\r\n    // a unique name for the form\r\n    //каждая форма должна иметь уникальное строковое имя (для распознавания ее редаксформом)\r\n    form: 'message'//form: - это название не связано с form из store.js\r\n})(MessageForm);//-ется редаксформ над презентационной компонентой\r\n\r\n\r\nconst AddMessage = (props) =>{\r\n    const onSubmit = (formData) => {// сюда придут данные их формы, передаем эту  функцию в LoginReduxForm чтоб получить эти данные из формы\r\n        //alert(formData.message);\r\n        props.addNewMess(formData.message);\r\n    };\r\n\r\n    return(\r\n        <div className={classes.block}>\r\n            <Users massUsers={props.dataDialogs}/>\r\n            <h3>Добавить сообщение</h3>\r\n            <MessageReduxForm onSubmit = {onSubmit}/>\r\n        </div>\r\n    )\r\n};\r\nexport  default  AddMessage;\r\n\r\n/*const AddMessage = (props) =>{\r\n    //console.log(props)\r\n   // let inputRef = React.createRef();\r\n\r\n    let addMess = ()=>{//функция добавления mess\r\n        props.addNewMess();\r\n       // props.dispatch(addMessActionCreator());// вызываем (из пропсов) функцию из BLL\r\n    };\r\n    let changePost = (e) =>{ //функция изменения состояния значения инпута\r\n        let text =e.target.value;// берем введенное значение\r\n        props.changeMess(text);\r\n       // props.dispatch(changePostActionCreator(text));// передаем в функцию из BLL\r\n    };\r\n\r\n    return(\r\n        <div className={classes.block}>\r\n            <Users dataDialogs = {props.dataDialogs}/>\r\n            <h3>добавить сообщение</h3>\r\n            <input onChange={changePost} value={props.newText}  type=\"text\" className={`${classes.input_text} ${classes.reset_properties}`}  placeholder='your news...'/>\r\n            <button onClick={addMess} className={`${classes.send_btn} ${classes.reset_properties}`}>Send </button>\r\n\r\n\r\n        </div>\r\n\r\n    )*/","\r\nimport {addMessActionCreator} from \"../../../redux/dialogReducer\";\r\nimport AddMessage from \"./AddMessage\";\r\nimport {connect} from \"react-redux\";\r\n\r\nlet mapStateToProps = (state) => {\r\n    return {\r\n        dataDialogs: state.dialogs.dataDialogs\r\n    }\r\n\r\n};\r\nlet mapDispatchToProps = (dispatch) => {\r\n  return {\r\n      addNewMess: (message) => {\r\n          dispatch(addMessActionCreator(message));\r\n      }\r\n  }\r\n};\r\n\r\nconst AddMessageContainer = connect(mapStateToProps,mapDispatchToProps )(AddMessage);//сoздаем контейнерную компоненту для AddMessage с помощью библиотеки react-redux (connect)\r\n\r\n\r\n\r\nexport  default AddMessageContainer;\r\n\r\n/*\r\n const AddMessageContainer = (props) =>{\r\n    //console.log(props)\r\n    // let inputRef = React.createRef();\r\n   //\r\n\r\n    return(\r\n        <StoreContext.Consumer>\r\n            { (store) => {\r\n\r\n                let state = store.getState();\r\n                let addMess = ()=>{//функция добавления mess\r\n                    store.dispatch(addMessActionCreator());// вызываем (из пропсов) функцию из BLL\r\n                };\r\n                let changePost = (text) =>{ //функция изменения состояния значения инпута\r\n                    store.dispatch(changePostActionCreator(text));// передаем в функцию из BLL\r\n                };\r\n\r\n        return (   <AddMessage changeMess={changePost}\r\n                       addNewMess = {addMess}\r\n                       dataDialogs = {state.dialogs.dataDialogs}\r\n                       newText = {state.dialogs.newText}\r\n           />)\r\n             }\r\n         }\r\n        </StoreContext.Consumer>\r\n    )\r\n};\r\n*/","import classes from \"../Message/Message.module.css\";\r\nimport React from \"react\";\r\nimport Button from \"../Button/Button\";\r\nimport {Field, reduxForm} from \"redux-form\";\r\nimport {Input} from \"../commons/FormControls/FormControls\";\r\nimport Users from \"../Message/Users/Users\";\r\n\r\n\r\n\r\nconst SearchUsersForm = (props) =>{\r\n    return(\r\n        <form onSubmit={props.handleSubmit}>\r\n            <div className={classes.search}>\r\n            <div className={classes.inputSearch}><Field  type=\"text\" name={'searchUsers'} placeholder={'введите имя'} component={Input} /></div>\r\n            <div className={classes.buttonSearch}> <Button  value=\"поиск\"/></div>\r\n            </div>\r\n        </form>\r\n    )\r\n};\r\nconst SearchUsersReduxForm = reduxForm({//контейнерная компонента,созда-\r\n    // a unique name for the form\r\n    //каждая форма должна иметь уникальное строковое имя (для распознавания ее редаксформом)\r\n    form: 'searchUsers'//form: - это название не связано с form из store.js\r\n})(SearchUsersForm);//-ется редаксформ над презентационной компонентой\r\n\r\n\r\n\r\nconst SearchUsers = (props) =>{\r\n    const onSubmit = (formData) => {// сюда придут данные их формы, передаем эту  функцию в LoginReduxForm чтоб получить эти данные из формы\r\n        props.getUsersSearchThunkCreator(formData.searchUsers);\r\n    };\r\n\r\n\r\n    return ( <div className={classes.searchUsers}>\r\n                 <SearchUsersReduxForm onSubmit = {onSubmit}/><br/>\r\n                 <div>\r\n                     <Users massUsers={props.users}/>\r\n                 </div>\r\n            </div>)\r\n};\r\n\r\nexport  default SearchUsers;","\r\nimport {connect} from \"react-redux\";\r\nimport {getUsersSearchThunkCreator} from \"../../redux/usersReducer\";\r\nimport SearchUsers from \"./SearchUsers\";\r\n\r\nlet mapStateToProps = (state) => {\r\n    return {\r\n        users: state.usersPage.searchUsersForName\r\n    }\r\n\r\n};\r\n\r\n\r\nconst SearchUsersContainer = connect(mapStateToProps,{getUsersSearchThunkCreator} )(SearchUsers);//сoздаем контейнерную компоненту для AddMessage с помощью библиотеки react-redux (connect)\r\n\r\n\r\n\r\nexport  default SearchUsersContainer;\r\n\r\n","import React from \"react\";\r\nimport classes from './Message.module.css';\r\nimport AddMessageContainer from \"./AddMessage/AddMessageContainer\";\r\nimport SearchUsersContainer from \"../SearchUsers/SearchUsersContainer\";\r\n\r\n\r\n\r\n\r\nlet Counter = (props) =>{\r\n  return  (<div className={classes.counterUsers}>\r\n      <span className={classes.text}>всего пользователей online</span>\r\n      <span className={classes.numbers}>5</span>\r\n  </div>)\r\n};\r\n\r\n\r\n\r\nconst Message = (props) =>{\r\n    //console.log(props);\r\n    return(\r\n        <div className={classes.dialogs}>\r\n            <h1>Чат</h1>\r\n            <SearchUsersContainer/>\r\n            <Counter/>\r\n\r\n            <AddMessageContainer />\r\n\r\n        </div>\r\n    )\r\n};\r\nexport  default Message;\r\n\r\n/*<div className={classes.dialogItems}>\r\n                {<DialogItem  dataDialogs = {props.dataDialogs}/>}\r\n</div>\r\n<div className={classes.messageItems}>\r\n{<MessageItem  dataMessages = {props.dataMessages}/>}\r\n</div>*/","import React from \"react\";\r\nimport {connect} from \"react-redux\";\r\nimport { WithAuthRedirect} from \"../../hoc/WithAuthRedirect\";\r\nimport Message from \"./Message\";\r\nimport {compose} from \"redux\";\r\n\r\n\r\nclass MessageApi extends  React.Component{\r\n\r\n    componentDidMount(){\r\n\r\n    }\r\n\r\n    render() {\r\n        return(\r\n            <Message {...this.props} />\r\n\r\n\r\n        )\r\n    }\r\n\r\n\r\n}\r\n\r\n\r\n\r\n\r\nlet mapStateToProps = (state)  =>({\r\n    //isAuth: state.auth.isAuth чтоб каждый раз не передавать через пропсы данные, необходимые hoc , одорачиваем ее в connect дважды - см WithAuthRedirect.js\r\n});\r\n\r\n//заменяем оборачивание компонент  одной функцией - compose (идем снизу вверх)\r\n//let AuthRedirectComponent = WithAuthRedirect(MessageApi);\r\n//export  default connect(mapStateToProps) (AuthRedirectComponent);\r\nexport  default compose(\r\n    connect(mapStateToProps),//2 export  default connect(mapStateToProps) (AuthRedirectComponent)\r\n    WithAuthRedirect//1 WithAuthRedirect(MessageApi)\r\n)(MessageApi)//(MessageApi)\r\n\r\n\r\n"],"sourceRoot":""}